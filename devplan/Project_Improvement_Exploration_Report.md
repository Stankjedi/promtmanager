# 🚀 프로젝트 개선 탐색 보고서

> 이 문서는 Vibe Coding Report VS Code 확장에서 자동으로 관리됩니다.  
> **적용된 개선 항목은 자동으로 필터링되어 미적용 항목만 표시됩니다.**
>
> 💡 **구체적인 구현 코드는 `Prompt.md` 파일을 참조하세요.**

---

## 📋 프로젝트 정보

| 항목 | 값 |
|------|-----|
| **프로젝트명** | promtmanager |
| **최초 분석일** | 2025-12-24 13:39 |

---

<!-- AUTO-ERROR-EXPLORATION-START -->
## 🔍 오류 및 리스크 탐색 절차

> 이 섹션은 개선 항목이 어떤 기준으로 도출되었는지를 설명합니다.

### 1. 데이터 수집
- 최근 빌드/테스트/런타임 로그 분석
- VS Code 문제 패널(Problems) 확인
- Git diff 및 커밋 메시지 검토
- TODO/FIXME 주석 스캔

### 2. 자동 분석
- 테스트 실패/스킵 케이스 분류
- 빌드 오류/경고 메시지 그룹화
- 빈번하게 수정되는 파일/모듈 탐지
- 정적 분석(lint, type-check) 결과 검토

### 3. 개선 후보 도출
- 동일 원인의 오류/경고를 하나의 "개선 항목 후보"로 묶기
- 영향도(테스트 실패, 빌드 실패, 성능 저하)에 따라 우선순위 부여
- 프로젝트 비전과의 일치 여부 검토

### 4. 최종 백로그 정제
- 복잡도/리스크 대비 효용 검토
- 완료 기준(DoD) 명시
- 관련 평가 점수 카테고리 매핑
<!-- AUTO-ERROR-EXPLORATION-END -->

---

## 📌 사용 방법

1. 이 보고서의 개선 항목을 검토합니다
2. 적용하고 싶은 항목을 선택하여 `Prompt.md`를 생성합니다
3. AI 에이전트(Copilot Chat 등)에 붙여넣어 구현을 요청합니다
4. 다음 보고서 업데이트 시 적용된 항목은 자동으로 제외됩니다

---

<!-- AUTO-SUMMARY-START -->
## 📊 개선 현황 요약

> 본 섹션의 개수/목록은 **현재 미적용 항목만** 집계합니다.

| 상태 | 개수 |
|------|------|
| 🔴 긴급 (P1) | 0 |
| 🟡 중요 (P2) | 2 |
| 🟢 개선 (P3) | 1 |
| 🚀 최적화 (OPT) | 2 |

| # | 항목명 | 우선순위 | 카테고리 |
|:---:|:---|:---:|:---|
| 1 | 템플릿 마스터 ↔ 필드 정의 정합성 경고 강화 | P2 | 🧹 코드 품질 / 🛡️ 안정성 |
| 2 | CI에 패키징(`npm run package:ext`) 검증 단계 추가 | P2 | 📦 배포 / 🧪 테스트 |
| 3 | 사이드 패널 템플릿 즐겨찾기(핀) 기능 | P3 | ✨ 기능 추가 |
| 4 | 사이드 패널 코드 모듈화로 변경 리스크/복잡도 감소 | OPT | 🚀 코드 최적화 / 🧹 코드 품질 |
| 5 | 옵션 페이지 추가 모듈화로 복잡도/회귀 위험 감소 | OPT | 🚀 코드 최적화 / 🧹 코드 품질 |

- **P2:** 운영 실수 방지(정합성 경고)와 배포 안정성(CI 패키징)으로 “프로덕션 준비도”를 끌어올립니다.
- **P3:** 개인화 탐색(즐겨찾기)으로 대규모 템플릿 운영 UX를 강화합니다.
- **OPT:** 대형 UI 파일을 모듈화해 장기 유지보수 비용을 낮춥니다.
<!-- AUTO-SUMMARY-END -->

---

<!-- AUTO-TODO-FIXME-START -->
## 🧾 TODO/FIXME 발견 요약

| 구분 | 결과 |
|---|---|
| **소스 코드(.js)** | TODO/FIXME 없음 |
| **문서(AGENTS.md)** | TODO 표기 19건 발견(작업 절차/예시 설명 문구) |

- **해석:** 현재 리포지토리의 실행 코드에는 TODO/FIXME가 없으며, 발견된 TODO는 주로 에이전트 작업 규칙 문서의 설명/예시 텍스트입니다. 따라서 본 보고서의 개선 백로그는 TODO/FIXME가 아니라 **실제 코드 구조/운영 리스크**를 중심으로 도출했습니다.
<!-- AUTO-TODO-FIXME-END -->

---

<!-- AUTO-IMPROVEMENT-LIST-START -->
## 📝 개선 항목 목록

### 🔴 중요 (P1)

- 현재 미적용 P1 항목 없음

### 🟡 중요 (P2)

#### [P2-1] 템플릿 마스터 ↔ 필드 정의 정합성 경고 강화

| 항목 | 내용 |
|------|------|
| **ID** | `validation-master-field-consistency-001` |
| **카테고리** | 🧹 코드 품질 / 🛡️ 안정성 |
| **복잡도** | Medium |
| **대상 파일** | `promptgen-extension/shared/template_validation.js`, `promptgen-extension/options/options.js`, `promptgen-extension/sidepanel/sidepanel.js`, `tests/template_validation.test.js` |
| **Origin** | static-analysis |
| **리스크 레벨** | medium |
| **관련 평가 카테고리** | codeQuality, errorHandling, productionReadiness, maintainability |

- **현재 상태:** `validateTemplate()`는 스키마 정규화(필수 필드/옵션 형식/중복 ID/기본값 보정 등)를 수행하지만, “마스터 본문 토큰(예: `{{asset}}`)”과 “필드 정의” 간 정합성(토큰 누락/미사용 필드)을 명시적으로 경고하지 않습니다.
- **문제점:** 템플릿 운영자가 마스터를 수정하거나 필드를 직접 편집할 때 토큰/필드 불일치가 발생해도 즉시 발견되지 않아, “UI는 보이는데 프롬프트에는 반영되지 않음(또는 반대)” 같은 혼란이 생길 수 있습니다.
- **영향:** 템플릿 운영 비용 증가, 사용자 혼란, 디버깅/지원 비용 증가, 출력 품질 저하.
- **원인:** 스키마 검증은 존재하지만 “콘텐츠(마스터) ↔ 모델(필드)” 정합성 검증이 별도로 정의되어 있지 않음.
- **개선 내용:** (1) 마스터에서 `{{token}}` 목록을 추출해 필드 토큰(기본 `{{id}}` 또는 `field.token`)과 비교 (2) 미정의 토큰/미사용 필드를 `warnings`(경고)로 반환 (3) 옵션 페이지 저장 시 경고를 명확히 노출(기존 박스 활용) (4) 사이드 패널에서는 현재 템플릿에 경고가 있을 때 `templateWarning`에 요약 표시(과도한 노이즈 방지).
- **기대 효과:** 운영 실수의 조기 발견, 프롬프트 출력 품질/일관성 향상, 지원 비용 감소.

**완료 기준(DoD)**
- [ ] 정합성 경고 로직 구현(미정의 토큰/미사용 필드)
- [ ] 옵션 페이지/사이드 패널에서 경고 노출 확인
- [ ] 관련 테스트 추가/수정 및 통과(`npm test`)
- [ ] 빌드/런타임 에러 없음

#### [P2-2] CI에 패키징(`npm run package:ext`) 검증 단계 추가

| 항목 | 내용 |
|------|------|
| **ID** | `tooling-ci-package-001` |
| **카테고리** | 📦 배포 / 🧪 테스트 |
| **복잡도** | Low |
| **대상 파일** | `.github/workflows/ci.yml`, `scripts/package_extension.py` |
| **Origin** | static-analysis |
| **리스크 레벨** | medium |
| **관련 평가 카테고리** | productionReadiness, maintainability |

- **현재 상태:** GitHub Actions CI는 `npm ci → npm test`를 수행하지만, 실제 배포 산출물 생성(확장 zip 패키징) 단계는 자동 검증하지 않습니다.
- **문제점:** 테스트는 통과해도 패키징 스크립트/확장 파일 구조 변경으로 “배포 직전”에 오류가 발견될 수 있습니다.
- **영향:** 릴리스 실패/지연, 재작업 비용 증가, 배포 신뢰도 하락.
- **원인:** CI가 “단위 테스트” 중심으로 구성되어 있으며, 패키징 단계의 실패를 조기에 잡는 품질 게이트가 없음.
- **개선 내용:** CI에 `npm run package:ext` 실행을 추가하고, 산출물(zip) 생성 여부를 확인해 실패 시 워크플로를 중단합니다(필요 시 `dist/` 정리 포함).
- **기대 효과:** 배포 안정성 향상, 릴리스 전 오류 조기 발견, 운영 비용 감소.

**완료 기준(DoD)**
- [ ] CI에서 `npm run package:ext` 실행 및 실패 시 중단
- [ ] 패키징 산출물 생성 여부 검증(파일 존재/사이즈 등)
- [ ] `npm test` 포함 전체 CI 통과
<!-- AUTO-IMPROVEMENT-LIST-END -->

---

<!-- AUTO-FEATURE-LIST-START -->
## ✨ 신규 기능 제안(기능 백로그)

### 🟢 개선 (P3)

#### [P3-1] 사이드 패널 템플릿 즐겨찾기(핀) 기능

| 항목 | 내용 |
|------|------|
| **ID** | `feat-sidepanel-favorites-001` |
| **카테고리** | ✨ 기능 추가 |
| **복잡도** | Medium |
| **대상 파일** | `promptgen-extension/sidepanel/sidepanel.html`, `promptgen-extension/sidepanel/sidepanel.js`, `promptgen-extension/sidepanel/sidepanel.css`, `promptgen-extension/shared/storage.js` |
| **Origin** | manual-idea |
| **리스크 레벨** | low |
| **관련 평가 카테고리** | extensibility, productionReadiness |

- **기능 목적/사용자 가치:** 자주 쓰는 템플릿을 상단에 고정(핀)해 템플릿 전환 시간을 줄이고, 대규모 템플릿 운영 시 반복 선택 비용을 낮춥니다.
- **현재 상태:** 검색/필터는 가능하지만, “자주 쓰는 템플릿”을 개인화해 빠르게 접근하는 기능은 없습니다.
- **문제/기회:** 템플릿이 늘어날수록 검색은 ‘발견’에는 좋지만, 반복 전환(상시 사용)에는 추가 비용이 발생합니다.
- **의존성/영향:** 템플릿 선택 UI/상태에 즐겨찾기 목록을 추가하며, 저장 키(예: `pg.favoriteTemplateIds`)를 통해 로컬에 유지합니다.
- **제안 구현 전략:** (1) 템플릿 선택 영역에 ⭐/핀 토글 추가 (2) 즐겨찾기 목록을 저장/로드 (3) `<select>`에 즐겨찾기 그룹(상단) 렌더 + 일반 목록 렌더 (4) 검색과 충돌하지 않도록 “즐겨찾기 우선 + 검색 필터” 규칙 정의.
- **기대 효과:** 템플릿 전환 속도/만족도 향상, 템플릿 규모 증가에 대한 UX 내성 강화.

**완료 기준(DoD)**
- [ ] 즐겨찾기 저장/로드 및 UI 반영 완료
- [ ] 검색/선택/저장(선택 템플릿/값) 기존 흐름과의 충돌 없음
- [ ] 오류(스토리지 실패) 시 사용자 안내 유지
- [ ] `npm test` 통과
<!-- AUTO-FEATURE-LIST-END -->

---

<!-- AUTO-OPTIMIZATION-START -->
## 🚀 코드 품질 및 성능 최적화

> 기존 기능을 해치지 않으면서 코드 품질과 성능을 향상시킬 수 있는 개선점입니다.

### 1) 일반 분석(요약)

- 대형 UI 엔트리 파일 2곳에 로직이 집중(`sidepanel.js` 약 700라인, `options.js` 약 600라인)되어 변경 단위/회귀 위험이 커질 수 있습니다.
- 상태 관리/DOM 렌더/스토리지 I/O/이벤트 처리 혼재로 인해 테스트 가능한 순수 로직 추출 여지가 있습니다.
- 중복 유틸/패턴(상태 메시지, DOM 헬퍼, 문자열 정리 등)을 공용 유틸로 정리할 수 있습니다.
- 기능 추가보다 “구조 정리(모듈화)”가 장기 비용을 좌우할 가능성이 큽니다.

### 🚀 코드 최적화 (OPT-1) — 사이드 패널 모듈화로 변경 리스크/테스트 가능성 개선

| 항목 | 내용 |
|------|------|
| **ID** | `opt-sidepanel-modularize-001` |
| **카테고리** | 🚀 코드 최적화 |
| **영향 범위** | 품질 |
| **대상 파일** | `promptgen-extension/sidepanel/sidepanel.js` (및 분리된 신규 파일) |

- **현재 상태:** 템플릿 로드/검색/필드 UI/미리보기/복사/저장/메시지 처리까지 단일 파일에 혼재되어 있습니다.
- **최적화 내용:** 책임 기준으로 모듈 분리(예: 템플릿 로딩/선택, 검색/필터, 필드 UI 생성, 저장/동기화, 미리보기/검증, 메시지 핸들러). 순수 함수(검색 필터 등)는 별도 모듈로 분리해 Node 테스트 가능 형태로 정리합니다.
- **예상 효과:** 변경 영향 범위 축소, 리뷰/디버깅 시간 감소, 테스트 확장 기반 확보.
- **측정 지표:** ① `sidepanel.js` 라인 수 감소(예: <300) ② 파일별 책임 1~2개 유지 ③ 순수 모듈에 대한 `node --test` 추가 가능.

### 🚀 코드 최적화 (OPT-2) — 옵션 페이지 추가 모듈화로 복잡도/회귀 위험 감소

| 항목 | 내용 |
|------|------|
| **ID** | `opt-options-modularize-001` |
| **카테고리** | 🚀 코드 최적화 |
| **영향 범위** | 품질 |
| **대상 파일** | `promptgen-extension/options/options.js` (및 분리된 신규 파일) |

- **현재 상태:** `persistence.js`, `quick_options.js`로 일부 분리는 되었으나, 템플릿 로드/리스트 렌더/편집 폼/가져오기·내보내기/이벤트 바인딩이 여전히 `options.js`에 집중되어 있습니다.
- **최적화 내용:** 기능 단위로 추가 분리(예: DOM 접근 헬퍼, 템플릿 리스트 뷰, 에디터/검증 바인딩, import/export 핸들러) 및 공통 상태 업데이트 흐름을 정리합니다.
- **예상 효과:** 유지보수성 향상, 기능 추가 속도 개선, 회귀/버그 감소.
- **측정 지표:** ① `options.js` 라인 수 감소(예: <350) ② 주요 함수 길이/복잡도 감소 ③ 변경 시 영향 범위(수정 파일 수) 축소.
<!-- AUTO-OPTIMIZATION-END -->
